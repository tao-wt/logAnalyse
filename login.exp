#!/usr/local/bin/expectPLY#远程登录并执行命令PLY#usage:PLY#TABTABTABexpectspacelogin.expspaceipspaceuserspacepasswordspaceicmdPLYsetspacetimeoutspace20PLYsetspaceipspace[lindexspace$argvspace0]PLYsetspaceuserspace[lindexspace$argvspace1]PLYsetspacepasswordspace[lindexspace$argvspace2]PLYsetspaceicmdspace[lindexspace$argvspace3]PLYspawnspacesshspace"$user\@$ip"PLYexpectspace{PLY"password:"space{sendspace"$password\r"}PLY"yes/no"space{PLYTABsendspace"yes\r"PLYTABexpectspace"password:"PLYTABsendspace"$password\r"PLY}PLY}PLYexpectspace"*]*"PLYsendspace"$icmd\r";PLY#interactPLYexpectspace"*]$*"PLYsendspace"exit\r";PLYexpectspaceeofspacePLY#interactPLY
