#!/bin/bashPLY#spacewriterspaceSY60216PLY#space脚本功能:nohup.out日志文件的备份,3参数：日志文件space保留多少次的备份space日志文件保留的行数PLY#spaceTABTABbashspaceclearLog.shspace/fullpath/filenamespacebakTimesspacebakLinesPLYPLYIFS=$'space\t\n'PLYOLDPATH="$PATH"PLYPATH=/bin:/usr/bin:/sbin/PLYexportspacePATHPLYPLYpathfile=$1PLYbakTimes=$2PLYbakLines=$3PLYPLYlogBackDelte(){PLYTABlocalspacecountfiles=0PLYTABlocalspacecountlines=0PLYTABifspace[space!space-dspace"${pathfile%nohup.out}logBackup"space];thenPLYTABTABmkdirspace${pathfile%nohup.out}logBackupPLYTABfiPLYTABcountlines=$(wcspace-lspace$pathfilespace|spaceawkspace'{printspace$1}')PLYTABifspace[space$countlinesspace-gtspace$bakLinesspace];thenPLYTABTABcpspace$pathfilespace${pathfile%nohup.out}logBackup/nohup_$(datespace+%Y%m%d%H%M).outspace&&space{PLYTABTABTABsedspace-ispace"1,$((countlines-bakLines))d"space$pathfilePLYTABTAB}PLYTABfiPLYTABpushdspacespace${pathfile%nohup.out}logBackupPLYTABTABcountfiles=$(lsspace-t1space|spacewcspace-lspace)PLYTABTABifspace[space$countfilesspace-gtspace$bakTimesspace];thenPLYTABTABTABlsspace-t1space|spacetailspace-$((countfiles-bakTimes))space|spacexargsspace-n1space-ispacermspace-fspace{}PLYTABTABfiPLYTABpopdPLY}PLYPLYdTime=$(datespace+%Y%m%d%H%M)PLYechospace$dTimespacestart...PLYlogBackDeltePLYechospace$dTimespacefinish...PLY
